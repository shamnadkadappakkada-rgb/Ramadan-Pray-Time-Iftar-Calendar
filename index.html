<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Worldwide Ramadan Calendar with Prayer Times</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Poppins:wght@300;400;600;700&display=swap');

body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:#0b0c10;
    color:white;
    overflow-x:hidden;
}

/* Background stars */
.overlay{
    position:fixed;
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#000000,#000c25);
    z-index:-2;
}
.stars{
    position:fixed;
    width:100%;
    height:100%;
    z-index:-1;
}
.star{
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    border-radius:50%;
    animation: twinkle 3s infinite alternate;
}
@keyframes twinkle{from{opacity:0.3;} to{opacity:1;}}

/* Floating moon top-right */
.moon{
    position:absolute;
    top:50px;
    right:40px;
    width:120px;
    height:120px;
    background:radial-gradient(circle at 30% 30%, #fff 20%, #f5deb3 50%, #d4af37 100%);
    border-radius:50%;
    box-shadow:0 0 80px rgba(255,215,0,0.7);
    animation: floatMoon 6s ease-in-out infinite;
}
@keyframes floatMoon{
0%{transform:translateY(0);opacity:1;}
25%{transform:translateY(15px);opacity:0.8;}
50%{transform:translateY(30px);opacity:0;}
75%{transform:translateY(15px);opacity:0.8;}
100%{transform:translateY(0);opacity:1;}
}

/* Header */
.top-banner{
    position:relative;
    text-align:center;
    padding:120px 10px 30px;
}
.top-banner h1{
    font-family:'Amiri', serif;
    font-size:42px;
    background:linear-gradient(45deg,#FFD700,#FFA500);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.dev{font-size:14px;opacity:0.8;}

/* Container */
.container{
    max-width:950px;
    margin:30px auto;
    padding:30px;
    border-radius:25px;
    background:rgba(255,255,255,0.05);
}

/* Controls */
.controls{text-align:center;margin-bottom:15px;}
button,input,select{
    padding:10px 14px;
    margin:6px;
    border-radius:30px;
    border:none;
    font-weight:600;
}
button{
    background:linear-gradient(45deg,#FFD700,#FFA500);
    cursor:pointer;
}
input{background:rgba(255,255,255,0.15);color:white;border:1px solid rgba(255,255,255,0.3);}
select{background:rgba(255,255,255,0.2);color:white;}

/* Table */
table{
    width:100%;
    margin-top:25px;
    border-collapse:collapse;
    background:rgba(0,0,0,0.8);
}
th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.2);text-align:center;}
th{background:#1f2833;}
.highlight{background:#FFD700;color:black;font-weight:bold;}
.current-day{background:#FFA500 !important;color:black;font-weight:bold;}
</style>
</head>
<body>

<div class="overlay"></div>
<div class="stars"></div>

<div class="top-banner">
<div class="moon"></div>
<h1>üåô Ramadan Mubarak | ÿ±ŸÖÿ∂ÿßŸÜ ŸÖÿ®ÿßÿ±ŸÉ</h1>
<p><strong>Worldwide Ramadan Calendar 2026</strong></p>
<p class="dev">Developed by: Shamnad Sharafudeen (D-Bross)</p>
<div id="todayPrayers"></div>
</div>

<div class="container" id="content">

<div class="controls">
<button onclick="getLocation()">üìç Auto Detect</button>
<input type="text" id="city" placeholder="Enter City">
<button onclick="manualSearch()">Search</button>

<select id="languageSelect" onchange="changeLanguage()">
<option value="en">English</option>
<option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
<option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
<option value="ur">ÿßÿ±ÿØŸà</option>
</select>

<button onclick="downloadPDF()">üìÑ PDF</button>
<button onclick="toggleAdhaan()" id="adhaanBtn">üîä Adhaan ON</button>
</div>

<div id="result"></div>
<div id="calendar"></div>
</div>

<audio id="adhaanAudio" preload="auto">
<source src="https://cdn.islamic.network/audio/adhan/adhan.mp3" type="audio/mpeg">
</audio>

<script>
// Stars background
const starsContainer=document.querySelector('.stars');
for(let i=0;i<120;i++){
const star=document.createElement('div');
star.classList.add('star');
star.style.top=Math.random()*100+'%';
star.style.left=Math.random()*100+'%';
starsContainer.appendChild(star);
}

// Translations
const translations={
en:{day:"Day",date:"Date",fajr:"Fajr",dhuhr:"Dhuhr",asr:"Asr",maghrib:"Maghrib",isha:"Isha",list:"Complete Ramadan Day List"},
ar:{day:"ÿßŸÑŸäŸàŸÖ",date:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ",fajr:"ÿßŸÑŸÅÿ¨ÿ±",dhuhr:"ÿßŸÑÿ∏Ÿáÿ±",asr:"ÿßŸÑÿπÿµÿ±",maghrib:"ÿßŸÑŸÖÿ∫ÿ±ÿ®",isha:"ÿßŸÑÿπÿ¥ÿßÿ°",list:"ŸÇÿßÿ¶ŸÖÿ© ÿ£ŸäÿßŸÖ ÿ±ŸÖÿ∂ÿßŸÜ ÿßŸÑŸÉÿßŸÖŸÑÿ©"},
hi:{day:"‡§¶‡§ø‡§®",date:"‡§§‡§æ‡§∞‡•Ä‡§ñ",fajr:"‡§´‡§ú‡§∞",dhuhr:"‡§ú‡§º‡•Å‡§π‡§∞",asr:"‡§Ö‡§∏‡§∞",maghrib:"‡§Æ‡§ó‡§º‡§∞‡§ø‡§¨",isha:"‡§á‡§∂‡§æ",list:"‡§∞‡§Æ‡§ú‡§º‡§æ‡§® ‡§ï‡•Ä ‡§™‡•Ç‡§∞‡•Ä ‡§∏‡•Ç‡§ö‡•Ä"},
ur:{day:"ÿØŸÜ",date:"ÿ™ÿßÿ±€åÿÆ",fajr:"ŸÅÿ¨ÿ±",dhuhr:"ÿ∏€Åÿ±",asr:"ÿπÿµÿ±",maghrib:"ŸÖÿ∫ÿ±ÿ®",isha:"ÿπÿ¥ÿßÿ°",list:"ÿ±ŸÖÿ∂ÿßŸÜ ⁄©€å ŸÖ⁄©ŸÖŸÑ ŸÅ€Åÿ±ÿ≥ÿ™"}
};

let currentLanguage="en";
let adhaanEnabled=true;
let lastData=null;
let playedPrayers={};

// Language change
function changeLanguage(){
currentLanguage=document.getElementById("languageSelect").value;
document.body.dir=(currentLanguage==="ar"||currentLanguage==="ur")?"rtl":"ltr";
if(lastData) renderCalendar(lastData);
}

// Auto adhaan toggle
function toggleAdhaan(){
adhaanEnabled=!adhaanEnabled;
document.getElementById("adhaanBtn").innerHTML=adhaanEnabled?"üîä Adhaan ON":"üîá Adhaan OFF";
}

// Location auto-detect
function getLocation(){
navigator.geolocation.getCurrentPosition(pos=>{
fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`)
.then(res=>res.json())
.then(data=>{
let city=data.address.city||data.address.town||data.address.village;
let country=data.address.country;
loadRamadan(city,country);
});
},err=>{alert("Location access denied. Please allow and try again.");});
}

function manualSearch(){
let city=document.getElementById("city").value;
loadRamadan(city,"");
}

// Load Ramadan calendar
async function loadRamadan(city,country){
let hijriYear=new Date().getFullYear()-579;
const response=await fetch(`https://api.aladhan.com/v1/hijriCalendarByCity/${hijriYear}/9?city=${city}&country=${country}&method=4`);
const data=await response.json();
lastData=data;
playedPrayers={};
renderCalendar(data);
}

// Render calendar & top prayers
function renderCalendar(data){
let todayDate=new Date();
let currentDay=todayDate.getDate();
let today=data.data.find(d=>parseInt(d.date.gregorian.day)===currentDay);
if(!today) today=data.data[0];

// Show top prayer times
document.getElementById("todayPrayers").innerHTML=`
<p class="highlight">üåÖ ${translations[currentLanguage].fajr}: ${today.timings.Fajr.replace(/ \(.*\)/,'')}</p>
<p>${translations[currentLanguage].dhuhr}: ${today.timings.Dhuhr.replace(/ \(.*\)/,'')}</p>
<p>${translations[currentLanguage].asr}: ${today.timings.Asr.replace(/ \(.*\)/,'')}</p>
<p class="highlight">üåô ${translations[currentLanguage].maghrib}: ${today.timings.Maghrib.replace(/ \(.*\)/,'')}</p>
<p>${translations[currentLanguage].isha}: ${today.timings.Isha.replace(/ \(.*\)/,'')}</p>
`;

// Table
let table=`<h3>${translations[currentLanguage].list}</h3>
<table>
<tr>
<th>${translations[currentLanguage].day}</th>
<th>${translations[currentLanguage].date}</th>
<th>${translations[currentLanguage].fajr}</th>
<th>${translations[currentLanguage].dhuhr}</th>
<th>${translations[currentLanguage].asr}</th>
<th>${translations[currentLanguage].maghrib}</th>
<th>${translations[currentLanguage].isha}</th>
</tr>`;

data.data.forEach((day,index)=>{
let isToday=parseInt(day.date.gregorian.day)===currentDay;

table+=`<tr class="${isToday?'current-day':''}">
<td>${index+1}</td>

<td>
    <div class="greg-date">${day.date.gregorian.date}</div>
    <div class="hijri-date">${day.date.hijri.date}</div>
</td>

<td class="highlight">${day.timings.Fajr.replace(/ \(.*\)/,'')}</td>
<td>${day.timings.Dhuhr.replace(/ \(.*\)/,'')}</td>
<td>${day.timings.Asr.replace(/ \(.*\)/,'')}</td>
<td class="highlight">${day.timings.Maghrib.replace(/ \(.*\)/,'')}</td>
<td>${day.timings.Isha.replace(/ \(.*\)/,'')}</td>

</tr>`;
});

// Auto Adhaan
if(adhaanEnabled){
checkAdhaan(today.timings);
}

table+="</table>";
document.getElementById("calendar").innerHTML=table;
}

// Auto Adhaan check
let adhaanInterval=null;
function checkAdhaan(todayTimings){
if(adhaanInterval) clearInterval(adhaanInterval);
adhaanInterval=setInterval(()=>{
if(!adhaanEnabled) return;
let now=new Date();
let currentTime=now.getHours()+":"+String(now.getMinutes()).padStart(2,'0');
let prayers={
Fajr:todayTimings.Fajr.split(" ")[0],
Dhuhr:todayTimings.Dhuhr.split(" ")[0],
Asr:todayTimings.Asr.split(" ")[0],
Maghrib:todayTimings.Maghrib.split(" ")[0],
Isha:todayTimings.Isha.split(" ")[0]
};
for(let prayer in prayers){
if(currentTime===prayers[prayer] && !playedPrayers[prayer]){
document.getElementById("adhaanAudio").play();
playedPrayers[prayer]=true;
}
}
},1000);
}

// PDF download
function downloadPDF(){
html2pdf().from(document.getElementById("content"))
.set({jsPDF:{format:'a4',orientation:'portrait'}})
.save("Ramadan-Pray-Time.pdf");
}
</script>
</body>
</html>

