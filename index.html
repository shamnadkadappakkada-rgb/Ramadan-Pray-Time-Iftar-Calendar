<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Worldwide Ramadan Calendar</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Poppins:wght@300;400;600;700&display=swap');

/* Body & Background */
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:radial-gradient(ellipse at bottom,#0d1b2a 0%,#000814 100%);
  color:white;
  overflow-x:hidden;
  position:relative;
}

/* üåü Stars */
.stars{
  position:fixed;
  top:0; left:0; width:100%; height:100%; z-index:0; overflow:hidden;
}
.star{
  position:absolute;
  width:2px; height:2px;
  background:white; border-radius:50%;
  animation:twinkle 3s infinite ease-in-out;
}
@keyframes twinkle{
  0%,100%{opacity:0.2;}50%{opacity:1;}
}

/* üåü Floating Golden Star (left side) */
.floating-star{
  position:fixed;
  top:200px;
  left:30px;
  width:20px;
  height:20px;
  background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
  border-radius:50%;
  box-shadow: 0 0 15px #FFD700, 0 0 25px #FFA500;
  animation:floatStar 5s ease-in-out infinite;
  z-index:2;
}
@keyframes floatStar{
  0%{transform:translateY(0) rotate(0deg);}
  50%{transform:translateY(-25px) rotate(45deg);}
  100%{transform:translateY(0) rotate(0deg);}
}

/* üåô Moons */
.moon-right, .moon-left{
  position:fixed;
  border-radius:50%;
  z-index:1;
}
.moon-right{
  top:80px; right:60px;
  width:150px; height:150px;
  background:radial-gradient(circle at 30% 30%, #fffef5 0%, #f8e8c8 35%, #d4af37 60%, #a67c00 100%);
  box-shadow:0 0 60px rgba(255,215,0,0.8),0 0 120px rgba(255,215,0,0.4),
              inset -25px -25px 40px rgba(0,0,0,0.45),
              inset 15px 15px 25px rgba(255,255,255,0.25);
  animation:floatMoonRight 6s ease-in-out infinite;
}
.moon-left{
  top:100px; left:60px;
  width:120px; height:120px;
  background:radial-gradient(circle at 40% 40%, #fffef5 0%, #e6c76b 60%, #a67c00 100%);
  box-shadow:0 0 40px rgba(255,215,0,0.7),
              inset -20px -20px 35px rgba(0,0,0,0.55),
              inset 10px 10px 20px rgba(255,255,255,0.2);
  clip-path: inset(0 50% 0 0);
  animation:floatMoonLeft 8s ease-in-out infinite;
}
@keyframes floatMoonRight{0%{transform:translateY(0);}50%{transform:translateY(-25px);}100%{transform:translateY(0);}}
@keyframes floatMoonLeft{0%{transform:translateY(0);}50%{transform:translateY(-18px);}100%{transform:translateY(0);}}

/* Top Banner */
.top-banner{text-align:center;padding:150px 10px 20px;position:relative;z-index:2;}
.arabic-main{font-family:'Amiri',serif;font-size:42px;color:#FFD700;}
.english-main{font-size:32px;color:#FFD700;margin-top:5px;}
.developer-line{margin-top:8px;font-size:14px;opacity:0.9;}
#todayDateDisplay{color:#FFD700;font-weight:600;margin-top:10px;}

/* Top Highlight: Fajr & Iftar */
.fajr-iftar-box{
  margin:20px auto;
  padding:15px;
  border-radius:15px;
  background:rgba(212,175,55,0.25);
  border:1px solid rgba(212,175,55,0.6);
  display:flex;
  justify-content:center;
  align-items:center;
  gap:15px;
  max-width:400px;
}
.fajr-iftar-box img{
  width:25px;
  height:25px;
}
.fajr-iftar-box p{
  margin:0; font-weight:600; font-size:18px; color:#FFD700;
}

/* Countdown Timer */
.timer-box{
  margin-top:15px;
  padding:15px;
  border-radius:15px;
  background:rgba(212,175,55,0.15);
  border:1px solid rgba(212,175,55,0.6);
  box-shadow:0 0 15px rgba(212,175,55,0.5);
}
#nextPrayerDisplay{color:#FFD700;font-size:20px;}
#countdownTimer{font-size:22px;font-weight:600;}

/* Container */
.container{
  max-width:950px;
  margin:30px auto;
  padding:25px;
  border-radius:20px;
  background:rgba(255,255,255,0.05);
  position:relative;
  z-index:2;
}

/* Controls */
.controls{text-align:center;margin-bottom:15px;}
button,input,select{
  padding:10px 14px;
  margin:6px;
  border-radius:30px;
  border:none;
  font-weight:600;
}
button{background:linear-gradient(45deg,#FFD700,#FFA500);cursor:pointer;}
select{background:#FFD700;}
input{background:rgba(255,255,255,0.15);color:white;border:1px solid rgba(255,255,255,0.3);}

/* Table */
table{width:100%;margin-top:25px;border-collapse:collapse;background:rgba(0,0,0,0.85);}
th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,0.2);text-align:center;}
th{background:#1f2833;}
.highlight{background:rgba(212,175,55,0.18);border:1px solid rgba(212,175,55,0.5);color:#FFD700;font-weight:600;border-radius:6px;padding:6px;}
.current-day{background:rgba(212,175,55,0.25);border-left:3px solid #FFD700;}
.hijri-date{font-size:13px;opacity:0.8;}
</style>
</head>
<body>

<!-- Stars & Moons -->
<div class="stars" id="stars"></div>
<div class="floating-star"></div>
<div class="moon-right"></div>
<div class="moon-left"></div>

<!-- Top Banner -->
<div class="top-banner">
  <div class="arabic-main">ÿ±ŸÖÿ∂ÿßŸÜ ŸÖÿ®ÿßÿ±ŸÉ</div>
  <div class="english-main">Ramadan Mubarak</div>
  <div class="developer-line">Developed by: Shamnad Sharafudeen (D-Bross)</div>
  <p id="todayDateDisplay"></p>

  <!-- Fajr & Iftar Highlight -->
  <div class="fajr-iftar-box">
    <img src="https://cdn-icons-png.flaticon.com/512/3448/3448722.png" alt="Ramadan Logo">
    <p id="fajrTime">Fajr: --:--</p>
    <p id="iftarTime">Iftar: --:--</p>
  </div>

  <!-- Countdown Timer -->
  <div class="timer-box">
    <h2 id="nextPrayerDisplay"></h2>
    <div id="countdownTimer"></div>
  </div>

  <div id="todayPrayers"></div>
</div>

<!-- Calendar & Controls -->
<div class="container" id="content">
  <div class="controls">
    <select onchange="changeLanguage(this.value)">
      <option value="en">English</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
      <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
      <option value="ur">ÿßÿ±ÿØŸà</option>
    </select>

    <button onclick="getLocation()">üìç Auto Detect</button>
    <input type="text" id="city" placeholder="Enter City">
    <button onclick="manualSearch()">Search</button>
    <button onclick="downloadPDF()">üìÑ PDF</button>
    <button onclick="toggleAdhaan()" id="adhaanBtn">üîä Auto Adhaan ON</button>
  </div>

  <div id="calendar"></div>
</div>

<!-- Adhaan Audio -->
<audio id="adhaanAudio" preload="auto">
  <source src="https://cdn.islamic.network/audio/adhan/adhan.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== Stars Animation ===== */
const starContainer=document.getElementById("stars");
for(let i=0;i<250;i++){
  let star=document.createElement("div");
  star.classList.add("star");
  star.style.top=Math.random()*100+"%";
  star.style.left=Math.random()*100+"%";
  star.style.animationDuration=(2+Math.random()*4)+"s";
  star.style.opacity=Math.random();
  starContainer.appendChild(star);
}

/* ===== LANGUAGE ===== */
let currentLanguage="en";
let lastData=null;
const translations={
  en:{day:"Day",date:"Date",fajr:"Fajr",dhuhr:"Dhuhr",asr:"Asr",maghrib:"Maghrib",isha:"Isha",next:"Next Prayer"},
  ar:{day:"ÿßŸÑŸäŸàŸÖ",date:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ",fajr:"ÿßŸÑŸÅÿ¨ÿ±",dhuhr:"ÿßŸÑÿ∏Ÿáÿ±",asr:"ÿßŸÑÿπÿµÿ±",maghrib:"ÿßŸÑŸÖÿ∫ÿ±ÿ®",isha:"ÿßŸÑÿπÿ¥ÿßÿ°",next:"ÿßŸÑÿµŸÑÿßÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©"},
  hi:{day:"‡§¶‡§ø‡§®",date:"‡§§‡§æ‡§∞‡•Ä‡§ñ",fajr:"‡§´‡§ú‡•ç‡§∞",dhuhr:"‡§ú‡§º‡•Å‡§π‡§∞",asr:"‡§Ö‡§∏‡§∞",maghrib:"‡§Æ‡§ó‡§∞‡§ø‡§¨",isha:"‡§à‡§∂‡§æ",next:"‡§Ö‡§ó‡§≤‡•Ä ‡§®‡§Æ‡§æ‡§ú‡§º"},
  ur:{day:"ÿØŸÜ",date:"ÿ™ÿßÿ±€åÿÆ",fajr:"ŸÅÿ¨ÿ±",dhuhr:"ÿ∏€Åÿ±",asr:"ÿπÿµÿ±",maghrib:"ŸÖÿ∫ÿ±ÿ®",isha:"ÿπÿ¥ÿßÿ°",next:"ÿß⁄ØŸÑ€å ŸÜŸÖÿßÿ≤"}
};
function changeLanguage(lang){
  currentLanguage=lang;
  document.body.style.direction=(lang==="ar"||lang==="ur")?"rtl":"ltr";
  if(lastData) renderCalendar(lastData);
}

/* ===== TIME FORMAT ===== */
function convertToAMPM(time){
  time=time.replace(/ \(.*\)/,'');
  let [h,m]=time.split(":");
  h=parseInt(h);
  let ampm=h>=12?"PM":"AM";
  h=h%12; h=h? h:12;
  return h+":"+m+" "+ampm;
}

/* ===== PRAYER SYSTEM ===== */
let prayerTimesToday=null;
let adhaanEnabled=true;
let lastAdhaanMinute=null;

function toggleAdhaan(){
  adhaanEnabled=!adhaanEnabled;
  document.getElementById("adhaanBtn").innerText=
    adhaanEnabled?"üîä Auto Adhaan ON":"üîá Auto Adhaan OFF";
}

function initializePrayerSystem(timings){
  prayerTimesToday={
    Fajr:timings.Fajr.substring(0,5),
    Dhuhr:timings.Dhuhr.substring(0,5),
    Asr:timings.Asr.substring(0,5),
    Maghrib:timings.Maghrib.substring(0,5),
    Isha:timings.Isha.substring(0,5)
  };

  // Update top Fajr & Iftar
  document.getElementById("fajrTime").innerText = "Fajr: "+convertToAMPM(timings.Fajr);
  document.getElementById("iftarTime").innerText = "Iftar: "+convertToAMPM(timings.Maghrib);

  setInterval(updatePrayerSystem,1000);
}

/* Rest remains same (updatePrayerSystem, getLocation, manualSearch, loadRamadan, renderCalendar, downloadPDF) */
</script>
</body>
</html>
