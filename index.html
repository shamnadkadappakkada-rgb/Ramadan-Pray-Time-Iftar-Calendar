<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Worldwide Ramadan Calendar</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Poppins:wght@300;400;600;700&display=swap');

body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:#0b0c10;
    color:white;
}

.overlay{
    position:fixed;
    width:100%;
    height:100%;
    background:linear-gradient(135deg, rgba(0,0,0,0.95), rgba(0,0,40,0.95));
    top:0;
    left:0;
    z-index:-2;
}

.stars{
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    z-index:-1;
}
.star{
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    border-radius:50%;
    animation: twinkle 3s infinite alternate;
}
@keyframes twinkle{from{opacity:0.2;} to{opacity:1;}}

.moon{
    position:absolute;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    width:140px;
    height:140px;
    background:radial-gradient(circle at 30% 30%, #fff 20%, #f5deb3 60%, #e6c200 100%);
    border-radius:50%;
    box-shadow:0 0 60px rgba(255,215,0,0.7);
    z-index:-1;
}

.top-banner{
    position:relative;
    text-align:center;
    padding:80px 10px 30px;
}
.top-banner h1{
    font-family:'Amiri', serif;
    font-size:40px;
    background:linear-gradient(45deg,#FFD700,#FFA500);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

.container{
    max-width:950px;
    margin:30px auto;
    padding:30px;
    border-radius:25px;
    background:rgba(255,255,255,0.05);
}

.controls{
    text-align:center;
    margin-bottom:15px;
}
button,input,select{
    padding:10px 14px;
    margin:6px;
    border-radius:30px;
    border:none;
}
button{
    background:linear-gradient(45deg,#FFD700,#FFA500);
    cursor:pointer;
}

table{
    width:100%;
    margin-top:25px;
    border-collapse:collapse;
    background:rgba(0,0,0,0.8);
}
th,td{
    padding:8px;
    border-bottom:1px solid rgba(255,255,255,0.2);
    text-align:center;
}
th{
    background:#1f2833;
}
.current-day{
    background:#FFA500 !important;
    color:black;
    font-weight:bold;
}
</style>
</head>

<body>
<div class="overlay"></div>
<div class="stars"></div>

<div class="top-banner">
<div class="moon"></div>
<h1>ğŸŒ™ Ramadan Mubarak | Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ</h1>
</div>

<div class="container" id="content">
<div class="controls">
<button onclick="getLocation()">ğŸ“ Auto Detect</button>
<input type="text" id="city" placeholder="Enter City">
<button onclick="manualSearch()">Search</button>

<select id="languageSelect" onchange="changeLanguage()">
<option value="en">English</option>
<option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
<option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
<option value="ur">Ø§Ø±Ø¯Ùˆ</option>
</select>

<button onclick="downloadPDF()">ğŸ“„ PDF</button>
</div>

<div id="result"></div>
<div id="calendar"></div>
</div>

<script>
// Stars
const starsContainer=document.querySelector('.stars');
for(let i=0;i<120;i++){
const star=document.createElement('div');
star.classList.add('star');
star.style.top=Math.random()*100+'%';
star.style.left=Math.random()*100+'%';
starsContainer.appendChild(star);
}

// Translations
const translations={
en:{day:"Day",date:"Date",fajr:"Fajr",maghrib:"Maghrib",list:"30 Days Ramadan List"},
ar:{day:"Ø§Ù„ÙŠÙˆÙ…",date:"Ø§Ù„ØªØ§Ø±ÙŠØ®",fajr:"Ø§Ù„ÙØ¬Ø±",maghrib:"Ø§Ù„Ù…ØºØ±Ø¨",list:"Ù‚Ø§Ø¦Ù…Ø© 30 ÙŠÙˆÙ… Ø±Ù…Ø¶Ø§Ù†"},
hi:{day:"à¤¦à¤¿à¤¨",date:"à¤¤à¤¾à¤°à¥€à¤–",fajr:"à¤«à¤œà¤°",maghrib:"à¤®à¤—à¤¼à¤°à¤¿à¤¬",list:"30 à¤¦à¤¿à¤¨ à¤°à¤®à¤œà¤¾à¤¨ à¤¸à¥‚à¤šà¥€"},
ur:{day:"Ø¯Ù†",date:"ØªØ§Ø±ÛŒØ®",fajr:"ÙØ¬Ø±",maghrib:"Ù…ØºØ±Ø¨",list:"30 Ø¯Ù† Ø±Ù…Ø¶Ø§Ù† ÙÛØ±Ø³Øª"}
};

let currentLanguage="en";

function changeLanguage(){
currentLanguage=document.getElementById("languageSelect").value;
document.body.dir=(currentLanguage==="ar"||currentLanguage==="ur")?"rtl":"ltr";
if(window.lastData) renderCalendar(window.lastData);
}

function getLocation(){
navigator.geolocation.getCurrentPosition(pos=>{
fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`)
.then(res=>res.json())
.then(data=>{
let city=data.address.city||data.address.town||data.address.village;
let country=data.address.country;
loadRamadan(city,country);
});
});
}

function manualSearch(){
let city=document.getElementById("city").value;
loadRamadan(city,"");
}

async function loadRamadan(city,country){
let hijriYear=new Date().getFullYear()-579;
const response=await fetch(`https://api.aladhan.com/v1/hijriCalendarByCity/${hijriYear}/9?city=${city}&country=${country}&method=4`);
const data=await response.json();
window.lastData=data;
renderCalendar(data);
}

function renderCalendar(data){
let todayDate=new Date();
let currentDay=todayDate.getDate();

let today=data.data.find(d=>parseInt(d.date.gregorian.day)===currentDay);
if(!today) today=data.data[0];

document.getElementById("result").innerHTML=`
<h3>${today.date.gregorian.date}</h3>
<p>ğŸŒ… ${translations[currentLanguage].fajr}: ${today.timings.Fajr}</p>
<p>ğŸŒ™ ${translations[currentLanguage].maghrib}: ${today.timings.Maghrib}</p>
`;

let table=`<h3>${translations[currentLanguage].list}</h3>
<table>
<tr>
<th>${translations[currentLanguage].day}</th>
<th>${translations[currentLanguage].date}</th>
<th>${translations[currentLanguage].fajr}</th>
<th>${translations[currentLanguage].maghrib}</th>
</tr>`;

data.data.forEach((day,index)=>{
let isToday=parseInt(day.date.gregorian.day)===currentDay;
table+=`<tr class="${isToday?'current-day':''}">
<td>${index+1}</td>
<td>${day.date.gregorian.date}</td>
<td>${day.timings.Fajr}</td>
<td>${day.timings.Maghrib}</td>
</tr>`;
});

table+="</table>";
document.getElementById("calendar").innerHTML=table;
}

function downloadPDF(){
html2pdf().from(document.getElementById("content"))
.set({jsPDF:{format:'a4',orientation:'portrait'}})
.save("Ramadan-Pray-Time.pdf");
}
</script>

</body>
</html>
